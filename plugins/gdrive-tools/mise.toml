# Google Drive Tools - mise configuration
#
# This file documents the environment variables needed for gdrive-tools.
# Actual secrets should be in .mise.local.toml (gitignored) or user's config.
#
# SETUP: Copy the [env] section to your project's .mise.local.toml:
#   [env]
#   GDRIVE_OP_UUID = "<your-1password-item-uuid>"
#
# Or add to ~/.config/mise/config.local.toml for global access.

[env]
# These are template placeholders - actual UUIDs go in .mise.local.toml
# GDRIVE_OP_UUID = "<1password-item-uuid>"
# GDRIVE_OP_VAULT = "Employee"  # Optional, defaults to Employee

[tools]
bun = "1.3"

[tasks.build]
description = "Compile the gdrive CLI binary from TypeScript source using Bun. Installs dependencies first, then builds. Output binary at skills/gdrive-access/scripts/gdrive. Prerequisite for all other gdrive tasks."
dir = "skills/gdrive-access/scripts"
run = "bun install && bun run build"

[tasks.test]
description = "Verify gdrive CLI binary works by running --help. Requires GDRIVE_OP_UUID environment variable set in .mise.local.toml for 1Password OAuth credential lookup. Quick smoke test, no API calls made."
dir = "skills/gdrive-access/scripts"
run = "./gdrive --help"

[tasks.list]
description = "List files and folders in a Google Drive folder by ID. Authenticates via 1Password OAuth (GDRIVE_OP_UUID). Pass folder_id as argument. Returns file names, IDs, MIME types, and sizes."
dir = "skills/gdrive-access/scripts"
run = "./gdrive list {{arg(name='folder_id')}}"

[tasks.sync]
description = "Download and sync a Google Drive folder to a local directory. Authenticates via 1Password OAuth (GDRIVE_OP_UUID). Args: folder_id (required), output directory (default: ./gdrive-sync). Overwrites existing local files if newer version exists in Drive."
dir = "skills/gdrive-access/scripts"
run = "./gdrive sync {{arg(name='folder_id')}} -o {{arg(name='output', default='./gdrive-sync')}}"
