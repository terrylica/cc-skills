#!/usr/bin/env bash
#MISE description="Execute complete 4-phase release pipeline: preflight validation → semantic-release version bump + changelog + git tag + GitHub release → marketplace sync + hook installation + cache clear → artifact verification. This is the primary entry point for releasing cc-skills. Requires GH_TOKEN and clean working directory."
#MISE depends=["release:preflight"]
set -euo pipefail

echo ""
echo "╔═══════════════════════════════════════════════════════════╗"
echo "║  cc-skills Full Release Workflow                          ║"
echo "╚═══════════════════════════════════════════════════════════╝"
echo ""

# Phase 2: Version
mise run release:version

# Phase 3: Sync
mise run release:sync

# Phase 4: Verify
mise run release:verify

echo ""
echo "╔═══════════════════════════════════════════════════════════╗"
echo "║  ✓ Release workflow complete!                             ║"
echo "╚═══════════════════════════════════════════════════════════╝"
echo ""
